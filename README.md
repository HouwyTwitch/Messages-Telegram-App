# Веб-приложение на FastAPI с Телеграм-ботом, MongoDB, Redis и Nginx

Этот проект представляет собой веб-приложение, созданное с использованием FastAPI, с использованием MongoDB для хранения данных, Redis для кэширования и Nginx в качестве веб-сервера. Также в проект включен Телеграм-бот, построенный с использованием Aiogram, который может взаимодействовать с веб-приложением.

## Содержание

- [Требования](#требования)
- [Структура проекта](#структура-проекта)
- [Настройка и установка](#настройка-и-установка)
- [Использование](#использование)
- [API Эндпоинты](#api-эндпоинты)
- [Телеграм-бот](#телеграм-бот)
- [Переменные окружения](#переменные-окружения)
- [Развертывание с SSL](#развертывание-с-ssl)

## Требования

- Docker
- Docker Compose
- Токен Телеграм-бота

## Структура проекта

```
.
├── bot
│   ├── bot.py
│   └── Dockerfile
├── web
│   ├── main.py
│   ├── requirements.txt
│   └── Dockerfile
├── nginx
│   └── default.conf
├── docker-compose.yml
└── README.md
```

## Настройка и установка

1. **Клонируйте репозиторий:**

    ```sh
    git clone https://github.com/yourusername/Web-app-with-FastAPI-Telegram-Bot-MongoDB-Redis-and-Nginx.git
    cd Web-app-with-FastAPI-Telegram-Bot-MongoDB-Redis-and-Nginx
    ```

2. **Создайте файл `.env` и установите необходимые переменные окружения:**

    ```env
    TELEGRAM_API_TOKEN=your-telegram-bot-token
    ```

3. **Соберите и запустите Docker контейнеры:**

    ```sh
    sudo docker-compose up --build
    ```

## Использование

После запуска Docker контейнеров, вы можете получить доступ к веб-приложению и взаимодействовать с Телеграм-ботом.

### Доступ к веб-приложению

- **API Эндпоинты:** http://localhost/api/v1/
- **Сервер Nginx:** http://localhost/

### Доступ к Телеграм-боту

- Откройте приложение Telegram и начните чат с вашим ботом, используя предоставленный токен.

## API Эндпоинты

### GET `/api/v1/messages/`

Возвращает список всех сообщений.

**Ответ:**

```json
[
  {
    "author": "Имя автора",
    "content": "Содержимое сообщения"
  },
  ...
]
```

### POST `/api/v1/message/`

Создает новое сообщение.

**Запрос:**

```json
{
  "author": "Имя автора",
  "content": "Содержимое сообщения"
}
```

**Ответ:**

```json
{
  "message": "Message received"
}
```

## Телеграм-бот

Телеграм-бот может взаимодействовать с веб-приложением, используя следующие команды:

- `/start` или `/help`: Показывает приветственное сообщение.
- `/messages`: Получает и отображает все сообщения.
- `/new`: Просит пользователя создать новое сообщение.
- `/send [author] [message]`: Отправляет новое сообщение.

## Переменные окружения

Убедитесь, что вы установили следующие переменные окружения в файле `.env`:

- `TELEGRAM_API_TOKEN`: Токен вашего Телеграм-бота.
